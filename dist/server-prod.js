!function(e){var t={};function a(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/static/",a(a.s=25)}([function(e,t){e.exports=require("react")},function(e,t){e.exports=require("prop-types")},function(e,t){e.exports=require("react-redux")},function(e,t){e.exports=require("react-router-dom")},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("fs")},function(e,t){e.exports=require("react-dom/server")},function(e,t){e.exports=require("redux")},function(e,t){e.exports=require("react-router")},function(e,t){e.exports=require("react-dom")},function(e,t){e.exports=require("classnames")},function(e,t){e.exports=require("react-hot-loader/root")},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,a){var n=a(5).Router();n.get("/health",(function(e,t){return t.json({success:!0})})),e.exports=n},function(e,t,a){"use strict";a.r(t);var n=a(4),r=a.n(n),l=a(5),c=a.n(l),o=a(6),i=a.n(o),s=a(0),u=a.n(s),m=a(7),d=a(8),f=a(2),E=function(){return{type:"SCROLL_TO_THE_BOTTOM_OF_THE_PAGE"}},p=function(e){return{type:"SELECT_USER",uuid:e}};function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(a,!0).forEach((function(t){g(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function g(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function h(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var y=function(e,t){return""===t?e:e.filter((function(e){return"".concat(e.name.first," ").concat(e.name.last).toLowerCase().includes(t.toLowerCase())}))},N={nationalities:{ch:{name:"ch",label:"CH",enabled:!0},es:{name:"es",label:"ES",enabled:!0},fr:{name:"fr",label:"FR",enabled:!0},gb:{name:"gb",label:"GB",enabled:!0}},users:[],allUsers:[],nextBatchOfUsers:[],selectedUser:null,page:0,batchSize:50,maxCatalogLength:1e3,loading:!1,filterPattern:"",seed:void 0},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_USERS":var a=[].concat(h(e.allUsers),h(t.users));return b({},e,{users:y(a,e.filterPattern),allUsers:a,nextBatchOfUsers:[]});case"SET_SEED":return b({},e,{seed:t.seed});case"SET_PAGE":return b({},e,{page:t.page});case"START_LOADING_USERS":return b({},e,{loading:!0});case"FINISH_LOADING_USERS":return b({},e,{loading:!1});case"ADD_NEXT_BATCH_OF_USERS":return b({},e,{nextBatchOfUsers:h(t.users)});case"FILTER_USERS":var n=y(e.allUsers,t.searchText);return b({},e,{users:n,filterPattern:t.searchText});case"SET_NATIONALITY_SETTINGS":return b({},e,{nationalities:b({},e.nationalities,g({},t.nationalityName,{name:t.nationalityName,label:t.nationalityLabel,enabled:t.checked}))});case"LOAD_INITIAL_USERS":return b({},e,{users:[],allUsers:[],nextBatchOfUsers:[],seed:void 0});case"SELECT_USER":var r=null!==t.uuid?e.allUsers.find((function(e){return e.login.uuid===t.uuid})):null;return b({},e,{selectedUser:r});default:return e}},O=a(9),j=(a(12),a(3)),w=a(1),_=a.n(w);a(13);function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var a=[],n=!0,r=!1,l=void 0;try{for(var c,o=e[Symbol.iterator]();!(n=(c=o.next()).done)&&(a.push(c.value),!t||a.length!==t);n=!0);}catch(e){r=!0,l=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw l}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var T=function(){var e=Object(f.useDispatch)(),t=x(Object(s.useState)(""),2),a=t[0],n=t[1],r=Object(s.useCallback)((function(t){var a=t.target.value;n(a),e(function(e){return{type:"FILTER_USERS",searchText:e}}(a))}));return u.a.createElement("form",{className:"form-inline"},u.a.createElement("input",{className:"search-users-input form-control mr-sm-2",type:"search",placeholder:"Search by name","aria-label":"Search",value:a,onChange:r}))},R=(a(14),function(e){return u.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark"},u.a.createElement("ul",{className:"navbar-nav mr-auto"},u.a.createElement("li",{className:"nav-item"},u.a.createElement(j.NavLink,{className:"nav-link",to:"/",exact:!0},"Home")),u.a.createElement("li",{className:"nav-item"},u.a.createElement(j.NavLink,{className:"nav-link",to:"/settings",exact:!0},"Settings"))),e.showSearch?u.a.createElement(T,null):null)});R.propTypes={showSearch:_.a.bool};var A=R,U=function(){var e=Object(f.useSelector)((function(e){return e.maxCatalogLength})),t=Object(f.useSelector)((function(e){return e.allUsers}));return function(){return t.length>=e}},C=function(){var e=Object(f.useSelector)((function(e){return e.allUsers})),t=Object(f.useDispatch)();Object(s.useEffect)((function(){0===e.length&&t({type:"LOAD_INITIAL_USERS"})}),[])},k=function(e){var t=Object(f.useDispatch)(),a=Object(s.useCallback)((function(){document.body.clientHeight-(window.scrollY+window.innerHeight)<800&&t(e())}));Object(s.useEffect)((function(){return window.addEventListener("scroll",a),function(){window.removeEventListener("scroll",a)}}),[])},L=(a(15),function(){return u.a.createElement("div",{className:"loading-container row"},u.a.createElement("div",{className:"loading spinner-border"},u.a.createElement("span",{className:"sr-only"},"Loading...")))}),P=(a(16),function(e){var t=e.user,a=Object(f.useDispatch)(),n=Object(s.useCallback)((function(){a(p(t.login.uuid))}));return u.a.createElement("tr",{key:t.login.uuid,className:"user-row",onClick:n},u.a.createElement("td",null,u.a.createElement("img",{src:t.picture.thumbnail,className:"rounded",alt:"User picture",width:"48",height:"48"})),u.a.createElement("td",null,t.name.first),u.a.createElement("td",null,t.name.last),u.a.createElement("td",null,t.login.username),u.a.createElement("td",null,t.email))});P.propTypes={user:_.a.shape({login:_.a.shape({uuid:_.a.string.isRequired,username:_.a.string.isRequired}),picture:_.a.shape({thumbnail:_.a.string}),name:_.a.shape({first:_.a.string.isRequired,last:_.a.string.isRequired}),email:_.a.string})};var q=P,D=(a(17),function(){return u.a.createElement("p",{className:"row end-catalog"},"End of users catalog")});a(18);var I=function(){C(),k(E);var e=U(),t=Object(f.useSelector)((function(e){return e.users})),a=Object(f.useSelector)((function(e){return e.loading}));return u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"row"},u.a.createElement("table",{className:"users-table table"},u.a.createElement("thead",null,u.a.createElement("tr",null,u.a.createElement("th",{scope:"col"},"Picture"),u.a.createElement("th",{scope:"col"},"First Name"),u.a.createElement("th",{scope:"col"},"Last Name"),u.a.createElement("th",{scope:"col"},"Username"),u.a.createElement("th",{scope:"col"},"Email"))),u.a.createElement("tbody",null,t.map((function(e){return u.a.createElement(q,{key:e.login.uuid,user:e})}))))),a?u.a.createElement(L,null):null,e()?u.a.createElement(D,null):null)},F=a(10),H=a.n(F),B=a(11),G=a.n(B),M=(a(19),function(e){var t=e.visible,a=e.title,n=e.children,r=e.onClose,l=G()("modal",{visible:t});return u.a.createElement("div",{className:l,tabIndex:"-1",onClick:function(e){"userModal"===e.target.id&&r(e)},role:"dialog",id:"userModal"},u.a.createElement("div",{className:"modal-dialog",role:"document"},u.a.createElement("div",{className:"modal-content"},a?u.a.createElement("div",{className:"modal-header"},u.a.createElement("h5",{className:"modal-title"},a),u.a.createElement("button",{type:"button",className:"close","aria-label":"Close",onClick:r},u.a.createElement("span",{"aria-hidden":"true"},"Ã—"))):null,u.a.createElement("div",{className:"modal-body"},n),u.a.createElement("div",{className:"modal-footer"},u.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:r},"Close")))))});M.propTypes={visible:_.a.bool,title:_.a.string,children:_.a.element.isRequired,onClose:_.a.func.isRequired};var Y=function(e){return function(e,t){var a=null;if("undefined"!=typeof window&&window.document){var n=document.querySelector(t);null!==n&&(a=H.a.createPortal(e,n))}return a}(u.a.createElement(M,e),"#modal-root")};Y.propTypes={visible:_.a.bool,title:_.a.string,children:_.a.element.isRequired,onClose:_.a.func.isRequired};var z=Y,J=(a(20),function(){var e=Object(f.useSelector)((function(e){return e.selectedUser})),t=Object(f.useDispatch)();return e?u.a.createElement(z,{title:"User Details",visible:!0,onClose:function(){t(p(null))}},u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col"},"Firstname"),u.a.createElement("div",{className:"col"},e.name.first)),u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col"},"Lastname"),u.a.createElement("div",{className:"col"},e.name.last)),u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col"},"Username"),u.a.createElement("div",{className:"col"},e.login.username)),u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col"},"Email"),u.a.createElement("div",{className:"col"},e.email)),u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col"},"Street"),u.a.createElement("div",{className:"col"},e.location.street.name)),u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col"},"City"),u.a.createElement("div",{className:"col"},e.location.city)),u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col"},"State"),u.a.createElement("div",{className:"col"},e.location.state)),u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col"},"Country"),u.a.createElement("div",{className:"col"},e.location.country)),u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col"},"Postcode"),u.a.createElement("div",{className:"col"},e.location.postcode)),u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col"},"Phone"),u.a.createElement("div",{className:"col"},e.phone)),u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col"},"Cell"),u.a.createElement("div",{className:"col"},e.cell))):null});a(21);var X=function(){return u.a.createElement(u.a.Fragment,null,u.a.createElement(A,{showSearch:!0}),u.a.createElement("div",{className:"container"},u.a.createElement(I,null),u.a.createElement(J,null)))},K=function(e){var t=e.name,a=e.label,n=e.checked,r=e.onChange;return u.a.createElement("div",{className:"form-check"},u.a.createElement("input",{type:"checkbox",className:"form-check-input",id:t,checked:n,onChange:function(e){r&&r(t,a,e.target.checked)}}),u.a.createElement("label",{className:"form-check-label",htmlFor:t},a))};K.propTypes={name:_.a.string.isRequired,checked:_.a.bool.isRequired,label:_.a.string.isRequired,onChange:_.a.func.isRequired};var Q=K,V=function(){var e=Object(f.useSelector)((function(e){return e.nationalities})),t=Object(f.useDispatch)();return[e,function(e,a,n){t(function(e,t,a){return{type:"UPDATE_NATIONALITY_SETTINGS",nationalityName:e,nationalityLabel:t,checked:a}}(e,a,n))}]};a(22);function W(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var a=[],n=!0,r=!1,l=void 0;try{for(var c,o=e[Symbol.iterator]();!(n=(c=o.next()).done)&&(a.push(c.value),!t||a.length!==t);n=!0);}catch(e){r=!0,l=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw l}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Z=function(){var e=W(V(),2),t=e[0],a=e[1];return u.a.createElement("div",{className:"settings-page container"},u.a.createElement(A,null),u.a.createElement("section",{className:"settings row"},u.a.createElement("form",null,u.a.createElement("fieldset",{className:"form-group"},u.a.createElement("legend",null,"Nationality Settings"),u.a.createElement("div",null,Object.values(t).map((function(e){return u.a.createElement(Q,{key:e.name,name:e.name,label:e.label,checked:e.enabled,onChange:a})})))))))},$=(a(23),function(){return u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"App"},u.a.createElement(j.Switch,null,u.a.createElement(j.Route,{exact:!0,path:"/",component:X}),u.a.createElement(j.Route,{exact:!0,path:"/settings",component:Z}))))}),ee=a(24),te=c()(),ae=process.env.PORT||3e3;te.use("/static",c.a.static(r.a.join(__dirname,"..","dist"))),te.get("/favicon.ico/",(function(e,t){t.sendFile(r.a.join(__dirname,"..","dist/favicon.ico"))})),te.get("/manifest.json/",(function(e,t){t.sendFile(r.a.join(__dirname,"..","dist/manifest.json"))})),te.get("/robots.txt/",(function(e,t){t.sendFile(r.a.join(__dirname,"..","dist/robots.txt"))})),te.use("/",ee),te.get("/*",(function(e,t){var a=Object(d.createStore)(S),n=Object(m.renderToString)(u.a.createElement(f.Provider,{store:a},u.a.createElement(O.StaticRouter,{location:e.originalUrl,context:{}},u.a.createElement($,null)))),l=a.getState();t.send(function(e,t){var a=i.a.readFileSync(r.a.resolve(__dirname,"..","dist","index.html"),"utf8"),n=JSON.stringify(t).replace(/</g,"\\u003c");return a=a.replace('<div id="root"></div>'," <script> window.__PRELOADED_STATE__ = ".concat(n,' <\/script><div id="root">').concat(e,"</div>")),console.log(a),a}(n,l))})),te.listen(ae)}]);